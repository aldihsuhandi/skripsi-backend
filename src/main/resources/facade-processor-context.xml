<?xml version="1.0" encoding="UTF-8" ?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.springframework.org/schema/util
           http://www.springframework.org/schema/util/spring-util.xsd">

    <!--processors-->
    <!--user-->
    <bean id="userRegisterProcessor" class="id.thesis.shumishumi.process.processor.user.UserRegisterProcessor"/>
    <bean id="userLoginProcessor" class="id.thesis.shumishumi.process.processor.user.UserLoginProcessor"/>

    <!--session-->
    <bean id="sessionLogoutProcessor" class="id.thesis.shumishumi.process.processor.session.SessionLogoutProcessor"/>

    <!--client-->
    <bean id="clientAuthProcessor" class="id.thesis.shumishumi.process.processor.client.ClientAuthProcessor"/>


    <util:map id="processorMap" map-class="java.util.HashMap">
        <entry key="USER_REGISTER">
            <ref bean="userRegisterProcessor"/>
        </entry>
        <entry key="USER_LOGIN">
            <ref bean="userLoginProcessor"/>
        </entry>

        <entry key="SESSION_LOGOUT">
            <ref bean="sessionLogoutProcessor"/>
        </entry>

        <entry key="CLIENT_AUTH">
            <ref bean="clientAuthProcessor"/>
        </entry>
    </util:map>

    <!--validators-->
    <!--user-->
    <bean id="userRegisterValidator" class="id.thesis.shumishumi.core.validator.user.UserRegisterValidator"/>
    <bean id="userLoginValidator" class="id.thesis.shumishumi.core.validator.user.UserLoginValidator"/>

    <!--session-->
    <bean id="sessionLogoutValidator" class="id.thesis.shumishumi.core.validator.session.SessionLogoutValidator"/>

    <!--client-->
    <bean id="clientAuthValidator" class="id.thesis.shumishumi.core.validator.client.ClientAuthValidator"/>

    <util:map id="validatorMap" map-class="java.util.HashMap">
        <entry key="USER_REGISTER">
            <ref bean="userRegisterValidator"/>
        </entry>
        <entry key="USER_LOGIN">
            <ref bean="userLoginValidator"/>
        </entry>

        <entry key="SESSION_LOGOUT">
            <ref bean="sessionLogoutValidator"/>
        </entry>

        <entry key="CLIENT_AUTH">
            <ref bean="clientAuthValidator"/>
        </entry>
    </util:map>

    <bean id="processFacade" class="id.thesis.shumishumi.process.service.ProcessFacade">
        <property name="processors" ref="processorMap"/>
        <property name="validators" ref="validatorMap"/>
    </bean>
</beans>